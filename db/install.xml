<?xml version="1.0" encoding="UTF-8" ?>
<XMLDB PATH="mod/codiana/db" VERSION="20131115" COMMENT="XMLDB file for Moodle mod/codiana"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../../../lib/xmldb/xmldb.xsd"
>
  <TABLES>
    <TABLE NAME="codiana" COMMENT="Code diagnosis and analysis">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="course" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" COMMENT="Course codiana activity belongs to"/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" COMMENT="Task name for codiana instance"/>
        <FIELD NAME="taskmainfilename" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" COMMENT="Name of the main class file. Startup class name."/>
        <FIELD NAME="taskdifficulty" TYPE="int" LENGTH="2" NOTNULL="true" DEFAULT="3" SEQUENCE="false" COMMENT="Difficulty of the task. 1 is easy 5 is hard."/>
        <FIELD NAME="taskgrademethod" TYPE="int" LENGTH="2" NOTNULL="true" DEFAULT="1" SEQUENCE="false" COMMENT="Grade method of the task. strick is 0. tolerant is 1. vague is 2"/>
        <FIELD NAME="tasklanguages" TYPE="int" LENGTH="20" NOTNULL="false" SEQUENCE="false" COMMENT="Allowed languages for this task, binary coding."/>
        <FIELD NAME="intro" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="General introduction of the codiana activity"/>
        <FIELD NAME="introformat" TYPE="int" LENGTH="4" NOTNULL="true" DEFAULT="0" SEQUENCE="false" COMMENT="Format of the intro field (MOODLE, HTML, MARKDOWN...)"/>
        <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="timemodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
        <FIELD NAME="tasktimeopen" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" COMMENT="From when is task open."/>
        <FIELD NAME="tasktimeclose" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" COMMENT="When is task closed"/>
        <FIELD NAME="taskmaxusers" TYPE="int" LENGTH="4" NOTNULL="false" SEQUENCE="false" COMMENT="Maximum user allowed for this task."/>
        <FIELD NAME="taskmaxattempts" TYPE="int" LENGTH="4" NOTNULL="false" SEQUENCE="false" COMMENT="Maximum attempts allowed for this task."/>
        <FIELD NAME="tasklimittime" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" COMMENT="Time limit for this task in ms."/>
        <FIELD NAME="tasklimitmemory" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" COMMENT="Memory limit for this task in bytes"/>
        <FIELD NAME="taskinputexample" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="Input example"/>
        <FIELD NAME="taskoutputexample" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="Output example"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="course" UNIQUE="false" FIELDS="course"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="codiana_language" COMMENT="Installed programming languages">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="name" TYPE="text" NOTNULL="true" SEQUENCE="false" COMMENT="Language name, such as java or c++"/>
        <FIELD NAME="extension" TYPE="text" NOTNULL="true" SEQUENCE="false" COMMENT="extension without dot, such as java, c, cpp, py"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="codiana_attempt" COMMENT="Table of every user attempts">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="taskid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" COMMENT="FK of user id"/>
        <FIELD NAME="attemptsent" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" COMMENT="From when is task open."/>
        <FIELD NAME="attemptstate" TYPE="int" LENGTH="3" NOTNULL="true" DEFAULT="0" SEQUENCE="false" COMMENT="State of the attempt, error, ok, wrong, output etc."/>
        <FIELD NAME="attemptlanguage" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" COMMENT="FK of the language id"/>
        <FIELD NAME="attemptruntime" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" COMMENT="Time is ms of the program run time"/>
        <FIELD NAME="attemptrunoutput" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" COMMENT="Number of correct lines"/>
        <FIELD NAME="attemptresulttime" TYPE="int" LENGTH="3" NOTNULL="false" SEQUENCE="false" COMMENT="Percentage value program run time"/>
        <FIELD NAME="attemptresultoutput" TYPE="int" LENGTH="3" NOTNULL="false" SEQUENCE="false" COMMENT="Percentage value of program correct lines"/>
        <FIELD NAME="attemptresultfinal" TYPE="int" LENGTH="3" NOTNULL="false" SEQUENCE="false" COMMENT="Final result"/>
        <FIELD NAME="attemptresultnote" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="Optional note to the result, may contain error description"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="taskid" TYPE="foreign" FIELDS="taskid" REFTABLE="codiana" REFFIELDS="id" COMMENT="FK of codiana id"/>
        <KEY NAME="userid" TYPE="foreign" FIELDS="userid" REFTABLE="user" REFFIELDS="id" COMMENT="FK of user id"/>
        <KEY NAME="attemptlanguage" TYPE="foreign" FIELDS="attemptlanguage" REFTABLE="codiana_language" REFFIELDS="id" COMMENT="FK of the language id"/>
      </KEYS>
    </TABLE>
  </TABLES>
</XMLDB>